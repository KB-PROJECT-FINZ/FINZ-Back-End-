<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="org.scoula.mapper.UserMapper">

    <update id="updateRiskType" parameterType="map">
        UPDATE user
        SET risk_type = #{riskType}
        WHERE username = #{username}
    </update>

    <select id="findRiskTypeNameByUsername" resultType="string">
        SELECT it.name_kr
        FROM user u
                 LEFT JOIN investment_types it ON u.risk_type = it.risk_type
        WHERE u.username = #{username}
    </select>

    <select id="findUsernameByUserId" resultType="String">
        SELECT username
        FROM user
        WHERE id = #{userId}
    </select>

    <select id="findGroupCodeByRiskType" parameterType="String" resultType="String">
        SELECT group_code
        FROM investment_types
        WHERE risk_type = #{riskType}
    </select>
    <!-- 닉네임 중복 확인 -->
    <select id="countByNickname" resultType="int" parameterType="string">
        SELECT COUNT(*) FROM user WHERE nickname = #{nickname}
    </select>

    <select id="findByUsername" parameterType="string" resultType="org.scoula.domain.Auth.vo.UserVo">
        SELECT * FROM user WHERE username = #{username}
    </select>




    <select id="findRiskTypeByUsername" resultType="string">
        SELECT risk_type
        FROM user
        WHERE username = #{username}
    </select>

    <select id="findRiskTypeByUserId" resultType="string">
        SELECT risk_type
        FROM user
        WHERE id = #{userId}
    </select>

<select id="findRiskTypeByRiskType" parameterType="String" resultType="org.scoula.domain.type.dto.RiskTypeDto">
    SELECT risk_type, name_kr, group_code, description
    FROM investment_types
    WHERE risk_type=#{riskType}
</select>


</mapper>
